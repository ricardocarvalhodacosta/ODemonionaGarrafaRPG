infomakefile.txt

# Variáveis
CC = gcc # Compilador
CFLAGS = -Wall -Wextra -Wpedantic # Flags de compilação
LDFLAGS = -lncurses -ljson-c # Flags de linkagem
SRC_DIR = src # Diretório com os arquivos-fonte
BUILD_DIR = build # Diretório para os arquivos compilados
TARGET = odemonionagarrafatest # Nome do arquivo executável

# Lista de arquivos-fonte
SRCS = $(wildcard $(SRC_DIR)/*.c)

# Lista de arquivos-objeto a serem gerados
OBJS = $(SRCS:$(SRC_DIR)/%.c=$(BUILD_DIR)/%.o)

# Regra padrão - compila tudo
all: $(TARGET)

# Regra para criar o arquivo executável
$(TARGET): $(OBJS)
	$(CC) $(CFLAGS) $^ -o $@ $(LDFLAGS)

# Regra para compilar os arquivos-fonte em arquivos-objeto
$(BUILD_DIR)/%.o: $(SRC_DIR)/%.c | $(BUILD_DIR)
	$(CC) $(CFLAGS) -c $< -o $@

# Regra para criar o diretório para os arquivos-objeto, caso ele não exista
$(BUILD_DIR):
	mkdir -p $(BUILD_DIR)

# Regra para limpar os arquivos compilados e o executável
clean:
	rm -rf $(BUILD_DIR) $(TARGET)


/*Explicação das variáveis:

    CC: compilador utilizado, no caso o gcc.
    CFLAGS: flags de compilação a serem utilizadas pelo compilador. No exemplo, foram incluídas as flags -Wall, -Wextra e -Wpedantic, que habilitam várias opções de warning.
    LDFLAGS: flags de linkagem a serem utilizadas pelo linker. No exemplo, foram incluídas as flags -lncurses e -ljson-c, que indicam as bibliotecas a serem linkadas ao executável.
    SRC_DIR: diretório onde se encontram os arquivos-fonte.
    BUILD_DIR: diretório onde serão gerados os arquivos-objeto.
    TARGET: nome do arquivo executável a ser gerado.

Explicação das regras:

    all: regra padrão, que compila tudo.
    $(TARGET): regra para criar o arquivo executável. Ela depende dos arquivos-objeto gerados.
    $(OBJS): lista de arquivos-objeto gerados a partir dos arquivos-fonte.
    $(BUILD_DIR)/%.o: regra para compilar cada arquivo-fonte em um arquivo-objeto correspondente. Ela depende do arquivo-fonte e do diretório onde será gerado o arquivo-objeto.
    $(BUILD_DIR): regra para criar o diretório onde serão gerados os arquivos-objeto.
    clean: regra para limpar os arquivos gerados ($(BUILD_DIR)) e o executável ($(TARGET)).*/